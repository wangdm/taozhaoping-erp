<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="AM_User">
	<resultMap id="T_User" type="User">
		<id column="id" property="id" />
		<result column="loginName" property="loginName" jdbcType="VARCHAR" />
		<result column="userPassword" property="userPassword" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="ENABLED" property="enabled" jdbcType="VARCHAR" />
		<result column="userType" property="userType" jdbcType="VARCHAR" />
		<result column="role_id" property="roleId" />
		<result column="enterprise_id" property="enterpriseId" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="age" property="age" jdbcType="DATE" />
		<result column="sex" property="sex" jdbcType="VARCHAR" />
		<result column="phone" property="phone" jdbcType="VARCHAR" />
		<result column="QQ" property="qq" jdbcType="VARCHAR" />
		<result column="mobile_number" property="mobileNumber" jdbcType="VARCHAR" />
		<result column="entryTime" property="entryTime" jdbcType="DATE" />
		<result column="address" property="address" jdbcType="VARCHAR" />
		<result column="education_background" property="educationBackground" jdbcType="VARCHAR" />
		<result column="CreateTime" property="createTime" jdbcType="DATE" />
		<result column="updateTime" property="updateTime" jdbcType="DATE" />
		<result column="NONCE" property="nonce" jdbcType="VARCHAR" />
	</resultMap>
	
	<resultMap type="com.zh.core.base.model.KeyObject" id="T_KeyObject">
		<id column="id" property="id" />
		<result column="name" property="text" jdbcType="VARCHAR" />
	</resultMap>
		
	<sql id="Base_Column_List">
		id, 
		loginName,
		userPassword, 
		name, 
		ENABLED, 
		userType, 
		role_id,
		enterprise_id, 
		email,
		age, 
		sex, 
		phone, 
		QQ, 
		mobile_number, 
		entryTime, 
		address,
		education_background, 
		CreateTime,
		updateTime,
		nonce
	</sql>

	<sql id="where">
		<where>
			<if test="id != null">
				And ID=#{id}
			</if>
			<if test="loginName != null">
				And loginName=#{loginName}
			</if>
			<if test="userPassword != null">
				And userPassword=#{userPassword}
			</if>
			<if test="enabled != null">
				And ENABLED=#{enabled}
			</if>
			<if test="enterpriseId != null">
				And enterprise_id=#{enterpriseId}
			</if>
			<if test="roleId != null">
				And role_id=#{roleId}
			</if>
		</where>
	</sql>
	
	<select id="queryUserName" resultMap="T_KeyObject">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Jul 09 
			16:36:05 CST 2014. -->
		select
			id,
			name
		from SYS_USER
			where ENABLED='0'
			order by id desc
	</select>
	
	<select id="select" resultMap="T_User" parameterType="User">
		select
		<include refid="Base_Column_List" />
		from SYS_USER
		<include refid="where" />
	</select>
	
	<select id="list" resultMap="T_User" parameterType="User">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Jul 09 
			16:36:05 CST 2014. -->
		select
		<include refid="Base_Column_List" />
		from SYS_USER
		<include refid="where" />
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>

	<select id="count" resultType="Integer" parameterType="User">
		select
		count(id)
		from SYS_USER
		<include refid="where" />
	</select>

	<delete id="delete" parameterType="java.math.BigDecimal">
		delete from SYS_USER
		where id = #{id}
	</delete>

	<insert id="insert" parameterType="User">
		<selectKey keyProperty="id" resultType="Long" order="BEFORE">
			select SEQUENCE_SYS_USER.nextval from dual
		</selectKey>
		insert into SYS_USER (
			id, 
			loginName, 
			userPassword,
			name, 
			ENABLED, 
			userType,
			role_id, 
			enterprise_id, 
			email,
			age, 
			sex, 
			phone, 
			QQ,
			mobile_number, 
			entryTime, 
			address,
			education_background, 
			CreateTime, 
			updateTime
		) values (
			#{id}, 
			#{loginName,jdbcType=VARCHAR},
			#{userPassword,jdbcType=VARCHAR},
			#{name,jdbcType=VARCHAR}, 
			#{enabled,jdbcType=VARCHAR}, 
			#{userType,jdbcType=VARCHAR},
			#{roleId,jdbcType=VARCHAR},
			#{enterpriseId,jdbcType=VARCHAR},
			#{email,jdbcType=VARCHAR},
			#{age,jdbcType=DATE}, 
			#{sex,jdbcType=VARCHAR}, 
			#{phone,jdbcType=VARCHAR},
			#{qq,jdbcType=VARCHAR},
			#{mobileNumber,jdbcType=VARCHAR}, 
			#{entryTime,jdbcType=DATE}, 
			#{address,jdbcType=VARCHAR},
			#{educationBackground,jdbcType=VARCHAR}, 
			#{createTime,jdbcType=DATE},
			#{updateTime,jdbcType=DATE}
		)
	</insert>

	<update id="update" parameterType="User" flushCache="true">
		update SYS_USER
		<set>
			<if test="loginName != null">
				loginName = #{loginName},
			</if>
			<if test="userPassword != null">
				userPassword = #{userPassword},
			</if>
			<if test="name != null">
				name = #{name},
			</if>
			<if test="enabled != null">
				ENABLED = #{enabled},
			</if>
			<if test="userType != null">
				userType = #{userType},
			</if>
			<if test="roleId != null">
				role_id = #{roleId},
			</if>
			<if test="enterpriseId != null">
				enterprise_id = #{enterpriseId},
			</if>
			<if test="email != null">
				email = #{email},
			</if>
			<if test="age != null">
				age = #{age},
			</if>
			<if test="sex != null">
				sex = #{sex},
			</if>
			<if test="phone != null">
				phone = #{phone},
			</if>
			<if test="qq != null">
				QQ = #{qq},
			</if>
			<if test="mobileNumber != null">
				mobile_number = #{mobileNumber},
			</if>
			<if test="entryTime != null">
				entryTime = #{entryTime},
			</if>
			<if test="address != null">
				address = #{address},
			</if>
			<if test="educationBackground != null">
				education_background = #{educationBackground},
			</if>
			<if test="createTime != null">
				CreateTime = #{createTime},
			</if>
			<if test="updateTime != null">
				updateTime = #{updateTime},
			</if>
			<if test="nonce != null">
				nonce = #{nonce},
			</if>
		</set>
		where id = #{id}
	</update>

</mapper>